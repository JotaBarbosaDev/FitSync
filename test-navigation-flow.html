<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Navega√ß√£o FitSync</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Teste de Navega√ß√£o FitSync</h1>
        <p>Este teste simula o fluxo de navega√ß√£o para verificar se o problema de bloqueio foi resolvido.</p>
        
        <div class="test-section info">
            <h3>üöÄ Status do Servidor</h3>
            <p>Certifique-se de que o servidor est√° rodando em: <strong>http://localhost:8101</strong></p>
            <button class="btn-primary" onclick="testServerStatus()">Verificar Servidor</button>
            <div id="server-status"></div>
        </div>

        <div class="test-section">
            <h3>üì± Testes de Navega√ß√£o</h3>
            <button class="btn-primary" onclick="openLoginPage()">1. Abrir P√°gina de Login</button>
            <button class="btn-warning" onclick="simulateRegisterClick()">2. Simular Clique "Criar Conta"</button>
            <button class="btn-success" onclick="openRegisterPage()">3. Abrir P√°gina de Registro Diretamente</button>
        </div>

        <div class="test-section">
            <h3>üîß Teste LocalStorage</h3>
            <button class="btn-primary" onclick="testLocalStorage()">Verificar Estado da Autentica√ß√£o</button>
            <button class="btn-warning" onclick="clearAuth()">Limpar Dados de Autentica√ß√£o</button>
            <div id="auth-status"></div>
        </div>

        <div class="test-section">
            <h3>üìã Log de Testes</h3>
            <div class="log" id="test-log"></div>
            <button class="btn-success" onclick="clearLog()">Limpar Log</button>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            logDiv.textContent += logEntry;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function clearLog() {
            document.getElementById('test-log').textContent = '';
        }

        async function testServerStatus() {
            log('Verificando status do servidor...');
            try {
                const response = await fetch('http://localhost:8101', { 
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                log('Servidor est√° respondendo ‚úì', 'success');
                document.getElementById('server-status').innerHTML = 
                    '<div style="color: green; font-weight: bold;">‚úì Servidor Online</div>';
            } catch (error) {
                log(`Erro ao conectar com servidor: ${error.message}`, 'error');
                document.getElementById('server-status').innerHTML = 
                    '<div style="color: red; font-weight: bold;">‚úó Servidor Offline</div>';
            }
        }

        function openLoginPage() {
            log('Abrindo p√°gina de login...');
            const loginUrl = 'http://localhost:8101/auth/login';
            window.open(loginUrl, '_blank');
            log(`P√°gina aberta: ${loginUrl}`, 'success');
        }

        function simulateRegisterClick() {
            log('Simulando clique no bot√£o "Criar Conta"...');
            log('INSTRU√á√ïES: Na p√°gina de login, clique no bot√£o "Criar Conta" e observe o comportamento.', 'info');
            log('Verifique se:', 'info');
            log('1. A URL muda para /auth/register', 'info');
            log('2. A p√°gina carrega sem travar', 'info');
            log('3. N√£o h√° mensagem de "esperar ou sair da p√°gina"', 'info');
        }

        function openRegisterPage() {
            log('Abrindo p√°gina de registro diretamente...');
            const registerUrl = 'http://localhost:8101/auth/register';
            window.open(registerUrl, '_blank');
            log(`P√°gina aberta: ${registerUrl}`, 'success');
        }

        function testLocalStorage() {
            log('Verificando estado da autentica√ß√£o no localStorage...');
            const currentUser = localStorage.getItem('fitsync_current_user');
            const isAuthenticated = !!currentUser;
            
            log(`Estado de autentica√ß√£o: ${isAuthenticated ? 'AUTENTICADO' : 'N√ÉO AUTENTICADO'}`, 
                isAuthenticated ? 'warning' : 'success');
            
            if (currentUser) {
                log(`ID do usu√°rio: ${currentUser}`, 'info');
            }
            
            document.getElementById('auth-status').innerHTML = `
                <div style="color: ${isAuthenticated ? 'orange' : 'green'}; font-weight: bold;">
                    ${isAuthenticated ? '‚ö†Ô∏è Usu√°rio Autenticado' : '‚úì Usu√°rio N√£o Autenticado'}
                </div>
            `;
        }

        function clearAuth() {
            log('Limpando dados de autentica√ß√£o...');
            localStorage.removeItem('fitsync_current_user');
            log('Dados de autentica√ß√£o removidos ‚úì', 'success');
            testLocalStorage();
        }

        // Executar testes iniciais
        window.addEventListener('load', () => {
            log('Teste de navega√ß√£o FitSync iniciado', 'success');
            testServerStatus();
            testLocalStorage();
        });
    </script>
</body>
</html>
